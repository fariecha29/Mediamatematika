<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Menjodohkan Bangun Datar</title>
<style>
  body { font-family: Arial, sans-serif; }
  h3 { text-align: center; }
  .container {
    display: flex;
    justify-content: center;
    gap: 120px;
    margin-top: 20px;
    position: relative;
  }
  .box { display: flex; flex-direction: column; gap: 70px; }
  .item, .answer {
    width: 160px;
    height: 120px;
    border: 2px solid #333;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #fff;
    position: relative;
    cursor: pointer;
  }
  .number {
    position: absolute;
    top: 5px;
    left: 5px;
    font-weight: bold;
    color: red;
  }
  .answer {
    height: 50px;
    background: #f0f0f0;
    font-size: 16px;
    font-weight: bold;
  }
  svg {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
  }
  .controls {
    text-align: center;
    margin-top: 20px;
  }
  button {
    margin: 0 10px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>
<body>
<h3>Jodohkan gambar bangun datar berikut dengan nama yang sesuai!</h3>

<div class="container" id="area">
  <!-- kolom gambar -->
  <div class="box" id="leftBox">
    <div class="item"><div class="number">1</div>
      <svg width="100" height="80">
        <rect x="10" y="20" width="80" height="40" fill="lightblue" stroke="black"/>
      </svg>
    </div>
    <div class="item"><div class="number">2</div>
      <svg width="100" height="80">
        <polygon points="50,10 90,70 10,70" fill="khaki" stroke="black"/>
      </svg>
    </div>
    <div class="item"><div class="number">3</div>
      <svg width="100" height="80">
        <polygon points="30,20 70,20 90,70 10,70" fill="lightgreen" stroke="black"/>
      </svg>
    </div>
    <div class="item"><div class="number">4</div>
      <svg width="100" height="100">
        <polygon points="50,10 80,50 50,90 20,50" fill="plum" stroke="black"/>
      </svg>
    </div>
    <div class="item"><div class="number">5</div>
      <svg width="100" height="100">
        <circle cx="50" cy="50" r="30" fill="lightcoral" stroke="black"/>
      </svg>
    </div>
  </div>

  <!-- SVG untuk garis -->
  <svg id="lines"></svg>

  <!-- kolom jawaban -->
  <div class="box" id="rightBox">
    <div class="answer">a. Segitiga</div>
    <div class="answer">b. Trapesium</div>
    <div class="answer">c. Layang-layang</div>
    <div class="answer">d. Lingkaran</div>
    <div class="answer">e. Persegi Panjang</div>
  </div>
</div>

<div class="controls">
  <button onclick="checkAnswers()">Periksa Jawaban</button>
  <button onclick="resetGame()">Reset</button>
</div>

<script>
const left = document.querySelectorAll("#leftBox .item");
const right = document.querySelectorAll("#rightBox .answer");
const lines = document.getElementById("lines");

// pasangan benar
const correctPairs = {
  0: 4, // Persegi Panjang
  1: 0, // Segitiga
  2: 1, // Trapesium
  3: 2, // Layang-layang
  4: 3  // Lingkaran
};

let selectedRight = null;
let userPairs = {}; // simpan jawaban user

// fungsi gambar garis
function drawCurve(fromEl, toEl, color, id) {
  const rect1 = fromEl.getBoundingClientRect();
  const rect2 = toEl.getBoundingClientRect();
  const area = document.getElementById("area").getBoundingClientRect();

  const x1 = rect1.right - area.left;
  const y1 = rect1.top + rect1.height/2 - area.top;
  const x2 = rect2.left - area.left;
  const y2 = rect2.top + rect2.height/2 - area.top;

  const cx1 = x1 + 100;
  const cx2 = x2 - 100;

  const path = document.createElementNS("http://www.w3.org/2000/svg","path");
  path.setAttribute("d", `M ${x1},${y1} C ${cx1},${y1} ${cx2},${y2} ${x2},${y2}`);
  path.setAttribute("stroke", color);
  path.setAttribute("stroke-width", "2.5");
  path.setAttribute("fill", "none");
  path.setAttribute("id", id);
  lines.appendChild(path);
}

// klik jawaban kiri dulus
right.forEach((ans, i) => {
  ans.addEventListener("click", () => {
    selectedRight = i;
    right.forEach(r => r.style.background = "#f0f0f0");
    ans.style.background = "#ffe066";
  });
});

// klik gambar kiri untuk hubungkan
left.forEach((itm, i) => {
  itm.addEventListener("click", () => {
    if (selectedRight !== null) {
      // hapus garis lama kalau sudah ada
      let old = document.getElementById("line-"+i);
      if (old) old.remove();

      // simpan pasangan user
      userPairs[i] = selectedRight;

      // gambar garis
      const colors = ["red","blue","green","orange","purple"];
      drawCurve(itm, right[selectedRight], colors[i], "line-"+i);

      // reset pilihan
      right.forEach(r => r.style.background = "#f0f0f0");
      selectedRight = null;
    }
  });
});

// cek jawaban
function checkAnswers() {
  let benar = 0;
  for (let key in correctPairs) {
    let line = document.getElementById("line-"+key);
    if (userPairs[key] == correctPairs[key]) {
      benar++;
      if (line) line.setAttribute("stroke","green"); // benar → hijau
    } else {
      if (line) line.setAttribute("stroke","red"); // salah → merah
    }
  }
  if (benar === 5) {
    alert("Selamat, jawaban Anda benar semua!");
  } else {
    alert("Jawaban benar: " + benar + " dari 5.\nPerhatikan garis merah untuk jawaban salah.");
  }
}

// reset
function resetGame() {
  lines.innerHTML = "";
  userPairs = {};
  selectedRight = null;
  right.forEach(r => r.style.background = "#f0f0f0");
}
</script>
</body>
</html>
